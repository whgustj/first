import random
from pico2d import *

__author__ = 'user'
from missile import Missile1

class character:
   image = None
   hpbar = None
   frameSize =9
   jump = True
   gravity = -30
   jumpMove = 0
   UP,DOWN,LEFT_RUN,RIGHT_IDLE,RIGHT_RUN,ATTACK =5,4,3,2,1,0

   global bullet1
   bullet1 = []

   missile1 = Missile1(-100,-100)
   # missilee = Missile1()
   def __init__(self):

        self.x, self.y = 50,300
        self.frame = random.randint(0, 1)
        self.state = self.RIGHT_IDLE
        self.gravity = 10
        if character.image == None:
            character.image = load_image('resource/character/fly.png')


   def handle_event(self, event):
        global mis
        if(event.type, event.key) == (SDL_KEYDOWN, SDLK_LEFT):
            if self.state in (self.RIGHT_IDLE,self.LEFT_RUN,self.RIGHT_RUN,self.UP,self.DOWN):
                self.state = self.LEFT_RUN
        elif(event.type, event.key) == (SDL_KEYDOWN,SDLK_RIGHT):
            if self.state in (self.RIGHT_IDLE,self.LEFT_RUN,self.RIGHT_RUN,self.UP,self.DOWN):
                self.state = self.RIGHT_RUN
        elif(event.type, event.key) == (SDL_KEYDOWN,SDLK_UP):
           if self.state in (self.RIGHT_IDLE,self.LEFT_RUN,self.RIGHT_RUN,self.UP,self.DOWN):
                self.state = self.UP
        elif(event.type, event.key) == (SDL_KEYDOWN,SDLK_DOWN):
            if self.state in (self.RIGHT_IDLE,self.LEFT_RUN,self.RIGHT_RUN,self.UP,self.DOWN):
                 self.state = self.DOWN
        elif(event.type, event.key) == (SDL_KEYDOWN,SDLK_a):
            if self.state in (self.RIGHT_IDLE,self.LEFT_RUN,self.RIGHT_RUN,self.UP,self.DOWN):
                self.state = self.ATTACK
                bullet1.append(Missile1(self.x,self.y))
        elif(event.type, event.key) == (SDL_KEYUP,SDLK_a):
            if self.state in (self.RIGHT_IDLE,self.LEFT_RUN,self.RIGHT_RUN,self.UP,self.DOWN,self.ATTACK):
                self.state = self.RIGHT_IDLE

   def update(self):
       global bullet1
       for bull1 in bullet1:
            bull1.update()
       if self.state == self.RIGHT_RUN:
             self.frameSize = 9
             self.x = min(800,self.x+5)
       elif self.state == self.LEFT_RUN:
              self.frameSize = 9
              self.x = max(0,self.x-5)
       elif self.state == self.RIGHT_IDLE:
              self.frameSize = 10
       elif self.state == self.UP:
              self.y = self.y+10
       elif self.state == self.DOWN:
              self.y = self.y-10

        # АјАн

       if self.state == self.RIGHT_IDLE:
             character.image = load_image("resource/character/fly.png")
       elif self.state == self.RIGHT_RUN:
              character.image = load_image("resource/character/fly.png")


   def draw(self):
        global bull1
        self.image.draw(self.x,self.y)
        for bull1 in bullet1:
             bull1.draw()
        # missile1.draw()
